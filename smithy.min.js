/*!
 * Joseph Myer's md5() algorithm wrapped in a self-invoked function to prevent
 * global namespace polution, modified to hash unicode characters as UTF-8.
 *
 * Copyright 1999-2010, Joseph Myers, Paul Johnston, Greg Holt, Will Bond <will@wbond.net>
 * http://www.myersdaily.org/joseph/javascript/md5-text.html
 * http://pajhome.org.uk/crypt/md5
 *
 * Released under the BSD license
 * http://www.opensource.org/licenses/bsd-license
 */

/*
Copyright Jason E. Smith 2008 Licensed under the Apache License, Version 2.0 (the "License");
You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
*/

define("smithy/declare",[],function(){function a(e,t){throw new Error("declare"+(t?" "+t:"")+": "+e)}function f(e,t){var r=[],s=[{cls:0,refs:[]}],o={},u=1,f=e.length,l=0,c,h,p,d,v,m,g,y;for(l=0;l<f;l+=1){p=e[l],p?n.call(p)!=="[object Function]"&&a("mixin #"+l+" is not a callable constructor.",t):a("mixin #"+l+" is unknown. Did you use dojo.require to pull it in?",t),h=p._meta?p._meta.bases:[p],d=0;for(c=h.length-1;c>=0;c-=1)v=h[c].prototype,v.hasOwnProperty("declaredClass")||(v.declaredClass="uniqName_"+(i+=1)),g=v.declaredClass,o.hasOwnProperty(g)||(o[g]={count:0,refs:[],cls:h[c]},u+=1),m=o[g],d&&d!==m&&(m.refs.push(d),d.count+=1),d=m;d.count+=1,s[0].refs.push(d)}while(s.length){d=s.pop(),r.push(d.cls),u-=1;while((y=d.refs).length===1){d=y[0];if(!d||(d.count-=1)){d=0;break}r.push(d.cls),u-=1}if(d)for(l=0,f=y.length;l<f;l+=1)d=y[l],(d.count-=1)||s.push(d)}return u&&a("can't build consistent linearization",t),p=e[0],r[0]=p?p._meta&&p===r[r.length-p._meta.bases.length]?p._meta.bases.length:1:0,r}function c(e,n,r){var i,o,u,f,l,c,h,p,d,v=this._inherited=this._inherited||{};typeof e=="string"&&(i=e,e=n,n=r),r=0,f=e.callee,i=i||f.nom,i||a("can't deduce a name to call inherited()",this.declaredClass),l=this.constructor._meta,u=l.bases,d=v.p;if(i!==s){if(v.c!==f){d=0,c=u[0],l=c._meta;if(l.hidden[i]!==f){o=l.chains,o&&typeof o[i]=="string"&&a("calling chained method with inherited: "+i,this.declaredClass);do{l=c._meta,h=c.prototype;if(l&&(h[i]===f&&h.hasOwnProperty(i)||l.hidden[i]===f))break}while(c=u[d+=1]);d=c?d:-1}}c=u[d+=1];if(c){h=c.prototype;if(c._meta&&h.hasOwnProperty(i))r=h[i];else{p=t[i];do{h=c.prototype,r=h[i];if(r&&(c._meta?h.hasOwnProperty(i):r!==p))break}while(c=u[d+=1])}}r=c&&r||t[i]}else{if(v.c!==f){d=0,l=u[0]._meta;if(l&&l.ctor!==f){o=l.chains,(!o||o.constructor!=="manual")&&a("calling chained constructor with inherited",this.declaredClass);while(c=u[d+=1]){l=c._meta;if(l&&l.ctor===f)break}d=c?d:-1}}while(c=u[d+=1]){l=c._meta,r=l?l.ctor:c;if(r)break}r=c&&r}v.c=r,v.p=d;if(r)return n===!0?r:r.apply(this,n||e)}function h(e,t){return typeof e=="string"?this.__inherited(e,t,!0):this.__inherited(e,!0)}function p(e,t,n){var r=this.getInherited(e,t);if(r)return r.apply(this,n||t||e)}function v(e){var t,n=this.constructor._meta.bases;for(t=0,l=n.length;t<l;t+=1)if(n[t]===e)return!0;return this instanceof e}function m(e,t){var n;for(n in t)n!==s&&t.hasOwnProperty(n)&&(e[n]=t[n])}function g(e,r){var i,o;for(i in r)o=r[i],(o!==t[i]||!(i in t))&&i!==s&&(n.call(o)==="[object Function]"&&(o.nom=i),e[i]=o);return e}function y(e){return N.safeMixin(this.prototype,e),this}function b(e,t){return function(){var n=arguments,r=n,i=n[0],s,o,u,a=e.length,f;if(!(this instanceof n.callee))return T(n);if(t&&(i&&i.preamble||this.preamble)){f=new Array(e.length),f[0]=n;for(o=0;;){i=n[0],i&&(s=i.preamble,s&&(n=s.apply(this,n)||n)),s=e[o].prototype,s=s.hasOwnProperty("preamble")&&s.preamble,s&&(n=s.apply(this,n)||n);if((o+=1)===a)break;f[o]=n}}for(o=a-1;o>=0;o-=1)s=e[o],u=s._meta,s=u?u.ctor:s,s&&s.apply(this,f?f[o]:n);s=this.postscript,s&&s.apply(this,r)}}function w(e,t){return function(){var n=arguments,r=n,i=n[0],s;if(!(this instanceof n.callee))return T(n);t&&(i&&(s=i.preamble,s&&(r=s.apply(this,r)||r)),s=this.preamble,s&&s.apply(this,r)),e&&e.apply(this,n),s=this.postscript,s&&s.apply(this,n)}}function E(e){return function(){var t=arguments,n=0,r,i;if(!(this instanceof t.callee))return T(t);for(;r=e[n];n+=1){i=r._meta,r=i?i.ctor:r;if(r){r.apply(this,t);break}}r=this.postscript,r&&r.apply(this,t)}}function S(e,t,n){return function(){var r,i,s,o=0,u=1;n&&(o=t.length-1,u=-1);for(;r=t[o];o+=u)i=r._meta,s=(i?i.hidden:r.prototype)[e],s&&s.apply(this,arguments)}}function x(e){r.prototype=e.prototype;var t=new r;return r.prototype=null,t}function T(e){var t=e.callee,n=x(t);return t.apply(n,e),n}function N(r,i,l){typeof r!="string"&&(l=i,i=r,r=""),l=l||{};var p,g,T,C,k,L,A,O=1,M=i;n.call(i)==="[object Array]"?(L=f(i,r),T=L[0],O=L.length-T,i=L[O]):(L=[0],i?n.call(i)==="[object Function]"?(T=i._meta,L=L.concat(T?T.bases:i)):a("base class is not a callable constructor.",r):i!==null&&a("unknown base class. Did you use dojo.require to pull it in?",r));if(i)for(g=O-1;;g-=1){p=x(i);if(!g)break;T=L[g],(T._meta?m:e)(p,T.prototype),C=new Function,C.superclass=i,C.prototype=p,i=p.constructor=C}else p={};N.safeMixin(p,l),T=l.constructor,T!==t.constructor&&(T.nom=s,p.constructor=T);for(g=O-1;g;g-=1)T=L[g]._meta,T&&T.chains&&(A=e(A||{},T.chains));p["-chains-"]&&(A=e(A||{},p["-chains-"])),T=!A||!A.hasOwnProperty(s),L[0]=C=A&&A.constructor==="manual"?E(L):L.length===1?w(l.constructor,T):b(L,T),C._meta={bases:L,hidden:l,chains:A,parents:M,ctor:l.constructor},C.superclass=i&&i.prototype,C.extend=y,C.prototype=p,p.constructor=C,p.getInherited=h,p.isInstanceOf=v,p.inherited=d,p.__inherited=c,r&&(p.declaredClass=r,u.setObject(r,C,o));if(A)for(k in A)p[k]&&typeof A[k]=="string"&&k!==s&&(T=p[k]=S(k,L,A[k]==="after"),T.nom=k);return C}var e,t,n,r,i,s,o="ORELang",u={_mixin:function(e,t,n){var r,i,s,o={};for(r in t)if(t.hasOwnProperty(r)){i=t[r];if(!e.hasOwnProperty(r)||e[r]!==i&&(!o.hasOwnProperty(r)||o[r]!==i))e[r]=n?n(i):i}return e},mix:function(){var e,t,n;for(t=0,n=arguments.length;t<n;t+=1)e=u.mixin(e,arguments[t]);return e},mixin:function(e,t){var n,r;arguments.length===1&&(t=e);for(r=1,n=arguments.length;r<n;r+=1)u._mixin(e,arguments[r]);return e},getProp:function(e,t,n){var r,i=0;while(n&&typeof (r=e[i+=1])!="undefined")n=typeof n[r]=="undefined"?n[r]:t?n[r]={}:undefined;return n},setObject:function(e,t,n){n=n||o;var r=e.split("."),i=r.pop(),s=u.getProp(r,!0,n);return s&&i?s[i]=t:undefined},getObject:function(e,t,n){var r,i;return n=n||o,u.isArray(e)?i=e.map(function(e){var r={},i,s;if(u.isObject(e)){for(i in e)e.hasOwnProperty(i)&&(r[i]=u.getProp(e[i].split("."),t,n));s=r}else s=u.getProp(e.split("."),t,n);return s}):(r=e.split("."),i=u.getProp(r,t,n)),i},exists:function(e,t){return u.getObject(e,!1,t)!==undefined}};e=u.mixin,t=Object.prototype,n=t.toString,r=function(){},i=0,s="constructor";var d=p;return u.safeMixin=N.safeMixin=g,u.declare=N,u.declare}),define("smithy/Logger",[],function(){var e=function(e,t,n){var r={TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},i,s=[];e=r[e.toUpperCase()],t||(t=console),typeof n=="undefined"&&(n=""),i=function(e,r,i,o,u){var a=t[e]||t.info;r=n+r;if(o)i?a.call(t,r+" --> "+JSON.stringify(i)):a.call(t,r);else try{u[0]&&(u[0]=n+u[0]),a.apply(t,u)}catch(f){a(r,i,o,u)}s.forEach(function(t){t.log(e,r,i,o)})},this.addPlugin=function(e){s.push(e)},this.trace=function(t,n,s){e<=r.TRACE&&i("debug",t,n,s,arguments)},this.debug=function(t,n,s){e<=r.DEBUG&&i("debug",t,n,s,arguments)},this.info=function(t,n,s){e<=r.INFO&&i("info",t,n,s,arguments)},this.warn=function(t,n,s){e<=r.WARN&&i("warn",t,n,s,arguments)},this.error=function(t,n,s){e<=r.ERROR&&i("error",t,n,s,arguments)},this.time=function(e){t.time.apply(t,arguments)},this.timeEnd=function(e){t.timeEnd.apply(t,arguments)}};return e}),define("smithy/util",["./declare","./Logger"],function(e,t){var n=new t("debug"),r=e(null,{mixin:function(e,t){for(var n in t)e[n]=t[n];return e},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},isUndefined:function(e){return typeof e=="undefined"}});return r}),define("smithy/GadgetFactory",["./declare"],function(e){var t=e(null,{constructor:function(e){this.resolver=e&&e.resolver,this.resolverAsync=e&&e.resolverAsync},getGadget:function(e,t){if(!this.resolver)throw new Error("No synchronous resolver was configured for this factory.");var n=this.resolver(e);return new n(t)},getGadgetAsync:function(e,t,n,r){if(!this.resolverAsync)throw new Error("No async resolver was configured for this factory.");this.resolverAsync(e,function(e){var i=new e(t);n.call(r,i)},this)}});return t}),define("smithy/lifecycle/Registry",["../declare","../util"],function(e,t){var n=new t,r=e(null,{locPublishes:"publishes",locSubscribes:"subscribes",locServices:"services",locPreferences:"preferences",locGadgets:"gadgets",constructor:function(){var e={};e[this.locPublishes]={},e[this.locSubscribes]={},this.getRegistryLocation=function(t){return e[t]||(e[t]={}),e[t]},this.getRegistryItem=function(e,t){return this.getRegistryLocation(e)[t]},this.addToRegistry=function(e,t,n){this.getRegistryLocation(e)[t]=n},this.removeFromRegistry=function(t,r){n.isUndefined(this.getRegistryLocation(t)[r])||delete e[t][r]},this.clear=function(t){e[t]={}},this.getDescriptorArray=function(t){var n=[],r=e[t];return Object.keys(r).forEach(function(e,t,i){n.push(r[e])}),n},this.enumerateEntries=function(e,t,r){var i=this.getRegistryLocation(e);n.isUndefined(i)||Object.keys(i).forEach(function(e,n,s){var o=i[e];t.call(r,o,e,i)})}}});return r}),define("smithy/AmdResolver",["./declare"],function(e){"use strict";var t=e(null,{constructor:function(e){var t=e&&e.path,n=e&&e.loud,r=e&&e.altSeparator,i=e&&e.synchronous;this.resolver=function(e,s){var o,u=e;if(e.indexOf(r||"/")<0)u=t+e;else if(e.indexOf(t)<0)return o;r&&(u=u.replace(new RegExp(r,"g"),"/"));try{dojo?require({async:!i},[u],function(e){o=e}):require([u],function(e){o=e})}catch(a){if(n)throw a}return o}}});return t}),define("smithy/WebStorage",["./declare"],function(e){var t=e(null,{constructor:function(e){var t=e&&e.namespace||this.declaredClass,n=function(e,n){var r=JSON.parse(n.getItem(t));return r[e]},r=function(e,n,r){var i=JSON.parse(r.getItem(t));i[e]=n,r.setItem(t,JSON.stringify(i))};if(!localStorage)throw new Error("Web storage is not supported by this runtime.");Object.defineProperty(this,"localStorage",{get:function(){return localStorage},set:function(e){throw new Error("The storage attribute is protected.")},enumerable:!0}),Object.defineProperty(this,"sessionStorage",{get:function(){return sessionStorage},set:function(e){throw new Error("The storage attribute is protected.")},enumerable:!0}),this.localStorage.getItem(t)||this.localStorage.setItem(t,"{}"),this.sessionStorage.getItem(t)||this.sessionStorage.setItem(t,"{}"),this.isLocalEmpty=function(){return this.localStorage.getItem(t)==="{}"},this.isSessionEmpty=function(){return this.sessionStorage.getItem(t)==="{}"},this.clearSession=function(){this.sessionStorage.setItem(t,"{}")},this.clearLocal=function(){this.localStorage.setItem(t,"{}")},this.getLocalObject=function(e){return n(e,this.localStorage)},this.setLocalObject=function(e,t){r(e,t,this.localStorage)},this.getSessionObject=function(e){return n(e,this.sessionStorage)},this.setSessionObject=function(e,t){r(e,t,this.sessionStorage)}}});return t}),define("smithy/Slag",["./declare","./WebStorage"],function(e,t){var n=e(null,{constructor:function(e){var n=this;this.config=e,this.changeEvent=e&&e.changeEvent||function(){},e.useWebStorage?this.storage=new t({namespace:"SmithySlag"}):(this.data={},this.storage={setLocalObject:function(e,t){n.data[e]=t},getLocalObject:function(e){return n.data[e]},setSessionObject:function(e,t){n.storage.setLocalObject(e,t)},getSessionObject:function(e){return n.storage.getLocalObject(e)}})},get:function(e){var t=this.storage.getLocalObject(e)||this.storage.getSessionObject(e);return t},set:function(e,t,n){var r,i=n&&n.session||this.config&&this.config.useWebStorage==="session";i?(r=this.storage.getSessionObject(e),this.storage.setSessionObject(e,t)):(r=this.storage.getLocalObject(e),this.storage.setLocalObject(e,t)),this.changeEvent({path:e,oldValue:r,newValue:t})}});return n}),define("smithy/BasePlate",["./declare","./util","./AmdResolver","./Logger","./Slag"],function(e,t,n,r,i){var s=["GadgetStatusChange","AreaStatusChange","GadgetSpaceStatusChange","GadgetRegistrationEvent","SlagChange"],o=["GadgetAreaSchema"],u,a=new t,f=new r("debug"),l=e(null,{constructor:function(e){var t,r,o={hasMessaging:!a.isUndefined(e.channelFactory),hasModels:!a.isUndefined(e.modelFactory),hasServices:!a.isUndefined(e.serviceFactory)},l=this;this.config=e,this.config.features=this.features=o,this.pub={},o.hasMessaging&&(e.factoriesConfigured||e.channelFactory.addResolver((new n({path:"smithy/schema/channels/",synchronous:!0})).resolver)),s.forEach(function(t){var n="smithy/schema/channels/"+t;if(o.hasMessaging){var r=e.channelFactory.get(n,l,"framework");l.pub[t]=function(e){f.debug("Sending message ["+t+"] from base plate",e),r.publish(e)}}else l.pub[t]=function(e){f.debug("Bullhorn not available for publishing on ["+t+"] from base plate",e)}}),this.asModel=function(){},o.hasModels&&(e.factoriesConfigured||e.modelFactory.addResolver((new n({path:"smithy/schema/models/",synchronous:!0})).resolver),this.asModel=function(e){return this.config.modelFactory.getModel(e,this)}),u||(u=new i({useWebStorage:e.useWebStorageForSlag,changeEvent:this.pub.SlagChange})),this.setSlagData=function(e,t){u.set(e,t)},this.getSlagData=function(e){return u.get(e)},this.loadModelData=function(e,t,n){n.error()},this.saveModelData=function(e,t,n){n.error()},o.hasServices&&(this.loadModelData=function(t,n,r){var i,s=e.serviceFactory.getServiceForModel(t);s.readModel({id:n},r)},this.saveModelData=function(t,n,r){var i,s=e.serviceFactory.getServiceForModel(t);n?s.updateModel({id:n},r):s.createModel({id:n},r)}),e.factoriesConfigured=!0}});return l}),define("smithy/md5",[],function(){function e(e,t){var o=e[0],u=e[1],a=e[2],f=e[3];o=n(o,u,a,f,t[0],7,-680876936),f=n(f,o,u,a,t[1],12,-389564586),a=n(a,f,o,u,t[2],17,606105819),u=n(u,a,f,o,t[3],22,-1044525330),o=n(o,u,a,f,t[4],7,-176418897),f=n(f,o,u,a,t[5],12,1200080426),a=n(a,f,o,u,t[6],17,-1473231341),u=n(u,a,f,o,t[7],22,-45705983),o=n(o,u,a,f,t[8],7,1770035416),f=n(f,o,u,a,t[9],12,-1958414417),a=n(a,f,o,u,t[10],17,-42063),u=n(u,a,f,o,t[11],22,-1990404162),o=n(o,u,a,f,t[12],7,1804603682),f=n(f,o,u,a,t[13],12,-40341101),a=n(a,f,o,u,t[14],17,-1502002290),u=n(u,a,f,o,t[15],22,1236535329),o=r(o,u,a,f,t[1],5,-165796510),f=r(f,o,u,a,t[6],9,-1069501632),a=r(a,f,o,u,t[11],14,643717713),u=r(u,a,f,o,t[0],20,-373897302),o=r(o,u,a,f,t[5],5,-701558691),f=r(f,o,u,a,t[10],9,38016083),a=r(a,f,o,u,t[15],14,-660478335),u=r(u,a,f,o,t[4],20,-405537848),o=r(o,u,a,f,t[9],5,568446438),f=r(f,o,u,a,t[14],9,-1019803690),a=r(a,f,o,u,t[3],14,-187363961),u=r(u,a,f,o,t[8],20,1163531501),o=r(o,u,a,f,t[13],5,-1444681467),f=r(f,o,u,a,t[2],9,-51403784),a=r(a,f,o,u,t[7],14,1735328473),u=r(u,a,f,o,t[12],20,-1926607734),o=i(o,u,a,f,t[5],4,-378558),f=i(f,o,u,a,t[8],11,-2022574463),a=i(a,f,o,u,t[11],16,1839030562),u=i(u,a,f,o,t[14],23,-35309556),o=i(o,u,a,f,t[1],4,-1530992060),f=i(f,o,u,a,t[4],11,1272893353),a=i(a,f,o,u,t[7],16,-155497632),u=i(u,a,f,o,t[10],23,-1094730640),o=i(o,u,a,f,t[13],4,681279174),f=i(f,o,u,a,t[0],11,-358537222),a=i(a,f,o,u,t[3],16,-722521979),u=i(u,a,f,o,t[6],23,76029189),o=i(o,u,a,f,t[9],4,-640364487),f=i(f,o,u,a,t[12],11,-421815835),a=i(a,f,o,u,t[15],16,530742520),u=i(u,a,f,o,t[2],23,-995338651),o=s(o,u,a,f,t[0],6,-198630844),f=s(f,o,u,a,t[7],10,1126891415),a=s(a,f,o,u,t[14],15,-1416354905),u=s(u,a,f,o,t[5],21,-57434055),o=s(o,u,a,f,t[12],6,1700485571),f=s(f,o,u,a,t[3],10,-1894986606),a=s(a,f,o,u,t[10],15,-1051523),u=s(u,a,f,o,t[1],21,-2054922799),o=s(o,u,a,f,t[8],6,1873313359),f=s(f,o,u,a,t[15],10,-30611744),a=s(a,f,o,u,t[6],15,-1560198380),u=s(u,a,f,o,t[13],21,1309151649),o=s(o,u,a,f,t[4],6,-145523070),f=s(f,o,u,a,t[11],10,-1120210379),a=s(a,f,o,u,t[2],15,718787259),u=s(u,a,f,o,t[9],21,-343485551),e[0]=h(o,e[0]),e[1]=h(u,e[1]),e[2]=h(a,e[2]),e[3]=h(f,e[3])}function t(e,t,n,r,i,s){return t=h(h(t,e),h(r,s)),h(t<<i|t>>>32-i,n)}function n(e,n,r,i,s,o,u){return t(n&r|~n&i,e,n,s,o,u)}function r(e,n,r,i,s,o,u){return t(n&i|r&~i,e,n,s,o,u)}function i(e,n,r,i,s,o,u){return t(n^r^i,e,n,s,o,u)}function s(e,n,r,i,s,o,u){return t(r^(n|~i),e,n,s,o,u)}function o(t){/[\x80-\xFF]/.test(t)&&(t=unescape(encodeURI(t))),txt="";var n=t.length,r=[1732584193,-271733879,-1732584194,271733878],i;for(i=64;i<=t.length;i+=64)e(r,u(t.substring(i-64,i)));t=t.substring(i-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<t.length;i++)s[i>>2]|=t.charCodeAt(i)<<(i%4<<3);s[i>>2]|=128<<(i%4<<3);if(i>55){e(r,s);for(i=0;i<16;i++)s[i]=0}return s[14]=n*8,e(r,s),r}function u(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}function f(e){var t="",n=0;for(;n<4;n++)t+=a[e>>n*8+4&15]+a[e>>n*8&15];return t}function l(e){for(var t=0;t<e.length;t++)e[t]=f(e[t]);return e.join("")}function h(e,t){return e+t&4294967295}var a="0123456789abcdef".split(""),c=function(e){return l(o(e))};if(c("hello")!="5d41402abc4b2a76b9719d911017c592")function h(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}return c}),define("smithy/JSONQuery",[],function(){function map(e,t){var n=e.length;if(typeof t!="function")throw new TypeError;var r=new Array(n),i=arguments[2];for(var s=0;s<n;s++)s in e&&(r[s]=t.call(i,e[s],s,e));return r}function filter(e,t){var n=e.length;if(typeof t!="function")throw new TypeError;var r=new Array,i=arguments[2];for(var s=0;s<n;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&r.push(o)}return r}function slice(e,t,n,r){var i=e.length,s=[];n=n||i,t=t<0?Math.max(0,t+i):Math.min(i,t),n=n<0?Math.max(0,n+i):Math.min(i,n);for(var o=t;o<n;o+=r)s.push(e[o]);return s}function expand(e,t){function r(e){t&&(t!==!0||e instanceof Array?e[t]&&n.push(e[t]):n.push(e));for(var i in e){var s=e[i];t?s&&typeof s=="object"&&r(s):n.push(s)}}var n=[];if(t instanceof Array){if(t.length==1)return e[t[0]];for(var i=0;i<t.length;i++)n.push(e[t[i]])}else r(e);return n}function distinctFilter(e,t){var n=[],r={};for(var i=0,s=e.length;i<s;++i){var o=e[i];t(o,i,e)&&(typeof o=="object"&&o?o.__included||(o.__included=!0,n.push(o)):r[o+typeof o]||(r[o+typeof o]=!0,n.push(o)))}for(i=0,s=n.length;i<s;++i)n[i]&&delete n[i].__included;return n}var JSONQuery=function(query,obj){function call(e){prefix=e+"("+prefix}function makeRegex(e,t,n,r,i){return str[i].match(/[\*\?]/)||r=="~"?"/^"+str[i].substring(1,str[i].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,".$1")+(r=="~"?"$/i":"$/")+".test("+t+")":e}tokens=[];var depth=0,str=[];query=query.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(e){return depth+=e=="["?1:e=="]"?-1:0,e=="]"&&depth>0?"`]":e.charAt(0)=='"'||e.charAt(0)=="'"?"`"+(str.push(e)-1):e});var prefix="";query.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw new Error("Unsafe function call")}),query=query.replace(/([^<>=]=)([^=])/g,"$1=$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(e){return e.charAt(0)=="."?e:e=="@"?"$obj":(e.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+e}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(e,t,n){var r=e.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/);if(r){var i="";return e.match(/^\./)&&(call("expand"),i=",true)"),call(r[1].match(/\=/)?"map":r[1].match(/\^/)?"distinctFilter":"filter"),i+",function($obj){return "+r[2]+"})"}return r=e.match(/^\[\s*([\/\\].*)\]/),r?".concat().sort(function(a,b){"+r[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(e,t,n){return"var av= "+n.replace(/\$obj/,"a")+",bv= "+n.replace(/\$obj/,"b")+";if(av>bv||bv==null){return "+(t=="/"?1:-1)+";}\n"+"if(bv>av||av==null){return "+(t=="/"?-1:1)+";}\n"})+"})":(r=e.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/),r?(call("slice"),","+(r[1]||0)+","+(r[2]||0)+","+(r[3]||1)+")"):e.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(call("expand"),(e.charAt(1)=="."?",'"+n+"'":e.match(/,/)?","+e:"")+")"):e)}).replace(/(\$obj\s*(\.\s*[\w_$]+\s*)*)(==|~)\s*`([0-9]+)/g,makeRegex).replace(/`([0-9]+)\s*(==|~)\s*(\$obj(\s*\.\s*[\w_$]+)*)/g,function(e,t,n,r,i){return makeRegex(e,r,i,n,t)}),query=prefix+(query.charAt(0)=="$"?"":"$")+query.replace(/`([0-9]+|\])/g,function(e,t){return t=="]"?"]":str[t]});var executor=eval("1&&function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj=$;return "+query+"}");for(var i=0;i<arguments.length-1;i++)arguments[i]=arguments[i+1];return obj?executor.apply(this,arguments):executor};return JSONQuery}),define("smithy/Query",["./JSONQuery"],function(e){var t=function(n,r){return e(n,r)};return t}),define("smithy/GadgetArea",["./declare","./util","./Logger","./BasePlate","./md5","./Query"],function(e,t,n,r,i,s){var o=new t,u=new n("debug"),a=e(r,{constructor:function(e){var t=this;this.config=o.mixin({percentage:100},e),this.subAreas=[],Object.defineProperty(this,"address",{get:function(){return t.getAddress()},enumerable:!0})},initialize:function(){this.statusChange("CREATED")},getViewFactory:function(){return this.config.windowRef.window.smithyProxy.viewFactory},getGadgetFactory:function(){return this.config.windowRef.window.smithyProxy.gadgetFactory},statusChange:function(e){this.pub.AreaStatusChange({address:this.getAddress(),status:e})},layout:{address:function(e,t){var n=["left","right","top","bottom","center"],r;return t==="borders"?r=n[e]:t!=="gadget"&&(r=t+"["+e+"]"),r},layout:function(e,t){var n=["left","right","top","bottom","center"];t!=="gadget"&&(n.forEach(function(t,n){e[t]=e.subAreas[n]}),e[t]=e.subAreas)},render:function(e,t){var n=["left","right","top","bottom","center"],r=e.config.parent;t==="gadget"?e.gadget&&!e.view&&(e.gadget.setupView(),e.view=e.getGadget().getView(),r.render()):(e.view||(e.view=e.getViewFactory().createView(e,t)),e.subAreas.forEach(function(i,s){var o=t==="borders"?n[s]:t==="rows"||t==="columns"?s:undefined;i&&(i.render(),e.view.hasChild(i.view)||e.view.addChild(i.view,o),r.renderedOnce&&!r.view.hasChild(e.view)&&!e.renderedParent&&(e.renderedParent=!0,r.render()))}),e.view.startup())},remove:function(e,t,n){var r=["left","right","top","bottom","center"];n==="borders"?(e.subAreas[t]=undefined,e[r[t]]=undefined):e.subAreas.splice(t,1)},index:function(e,t){var n,r={left:0,right:1,top:2,bottom:3,center:4};return t==="borders"?n=r[e]:t!=="gadget"&&(n=e.match(/[0-9]+/)[0]),n},impliedMode:function(e){var t={win:"windows",row:"rows",col:"columns",tab:"tabs"},n=t[e.substring(0,3)];return n||"borders"}},getAddress:function(e){var t="";return this.config.parent&&(t=this.config.parent.getAddress(this)),e&&(t=t+"/"+this.getSubAddress(e)),t},getSubAddress:function(e){var t="";return this.subAreas.forEach(function(n,r){n===e&&(t=this.layout.address(r,this.config.layoutMode))},this),t},setLayoutMode:function(e,t){this.config.layoutMode=e,t&&this.layout.layout(this,e)},addArea:function(e,t,n){var r=e.charAt(0)==="/"?e.slice(1):e,i=t&&t.insertAt,s=r.split("/"),u=s.shift(),a,f=!s.length,l,c={};this.config.layoutMode||(this.config.layoutMode=this.layout.impliedMode(u)),i&&i.length&&(i=t.insertAt.indexOf("/")===-1,t.insertAt=t.insertAt.replace(/[^\/]+\//,""),i&&(t.insertAt=!1)),a=u==="next"?this.subAreas.length:this.layout.index(u,this.config.layoutMode);if(!this.subAreas[a]||i){o.mixin(c,this.config);if(!t&&!f)throw new Error("Missing intermediate area: "+u);c.parent=this,c.layoutMode=this.layout.impliedMode(s[0]||u),i?this.subAreas.splice(a,0,n||this.createSubArea(c)):f?this.subAreas[a]=n||this.createSubArea(c):this.subAreas[a]=this.createSubArea(c),this.subAreas[a].initialize()}return f?l=this.subAreas[a]:l=this.subAreas[a].addArea(s.join("/"),t,n),this.setLayoutMode(this.config.layoutMode,!0),l},createSubArea:function(e){return new a(e)},removeArea:function(e){var t=this.getArea(e);return t.config.parent.removeSubArea(t)},removeSubArea:function(e){return this.subAreas.some(function(t,n){t===e&&this.removeSubAreaAtIndex(t,n)},this),e},clearSubAreas:function(){this.subAreas.forEach(function(e,t){e&&this.removeSubAreaAtIndex(e,t)},this)},removeSubAreaAtIndex:function(e,t){return this.view&&this.view.removeChild(e.view,t),e.destroy(),this.layout.remove(this,t,this.config.layoutMode),e},getArea:function(e){var t=e.replace(/\//g,"."),n;return t.charAt(0)!=="."&&(t="."+t),n=this.getAreas(t),n&&n.length?n[0]:n},getAreas:function(e){return s(e,this)},setGadget:function(e,t){this.setLayoutMode("gadget"),this.gadget=e,this.gadget.parent=this,this.gadgetDescriptor=t},removeGadget:function(){var e=this.config.parent;this.gadget&&(this.view!==this.gadget&&this.view?this.view.destroy():e&&e.view.removeChild(this.gadget),this.gadget.destroy(),this.gadget=undefined,this.view=undefined)},hasGadget:function(){return this.config.layoutMode==="gadget"&&this.getGadget()},getGadget:function(){return this.gadget},loadGadget:function(e,t,n){var r,i=this,s=o.mixin(o.mixin(o.mixin({},e.data),n),this.config.gadgetSpace.lastRouteParams||{}),u=o.mixin({gadgetSpace:t,initData:s,area:this},i.config),a=function(t){i.setGadget(t,e),t.setupLifecycle()},f;i.config.async?f=function(){r=i.getGadgetFactory().getGadgetAsync(e.gadget,u,a,i)}:f=function(){r=i.getGadgetFactory().getGadget(e.gadget,u),a(r)},this.whenWindowCreated(function(){!e.data&&e.configModel?i.loadModelData(e.configModel,e.configId,{load:function(t,n,r){e.data=t,f()},error:function(e,t){f()}}):f()})},findGadget:function(e){var t=e&&e.name||e||"",n=this.findAreas(function(e){var n=e.getGadget();return n&&n.name&&n.name===t},this);return n},detach:function(){throw new Error("not implemented")},render:function(){var e=this,t=e.config.parent;this.whenWindowCreated(function(){!t.view&&!e.isWindow?t.render():e.layout.render(e,e.config.layoutMode),e.renderedOnce=!0,e.statusChange("RENDERED")})},findArea:function(e,t,n){var r;return this.subAreas.some(function(i,s){return r=e.call(t,i),!r&&n&&n&&(r=i.findArea(e,t,n)),r}),!r&&!n&&this.subAreas.some(function(i,s){r=i.findArea(e,t,n)}),r},findAreas:function(e,t){var n=[];return this.traverseAreas(function(r){e.call(t,r)&&n.push(r)}),n},traverseAreas:function(e,t){this.subAreas.forEach(function(n,r){n&&(e.call(t,n),n.traverseAreas(e,t))})},whenWindowCreated:function(e){this.config.parent.whenWindowCreated(e)},destroy:function(e){e||(this.subAreas.forEach(function(e){e&&e.destroy(!1)}),this.subAreas=[]),this.hasGadget()?this.removeGadget():this.view&&this.view.destroy(),this.statusChange("DESTROYED")},realizeLayout:function(e,t){var n,r=function(e){e.address&&e.gadget&&this.config.gadgetSpace.loadGadgetTo(e.gadget.name,e.address,!0),e.subAreas.forEach(r,this)};this.subAreas.length>0&&!t&&this.subAreas.some(function(e,t){this.removeSubAreaAtIndex(e,t)},this),typeof e=="string"?n=JSON.parse(e):n=e,r.call(this,n),this.render()},getSerializedLayout:function(){return JSON.stringify(this.asModel("GadgetAreaSchema"))},unstashLayout:function(e,t){var n=this.getSlagData(e);this.realizeLayout(n,t)},stashLayout:function(){var e,t;return e=this.getSerializedLayout(),t=i(e),this.setSlagData(t,e),t},resize:function(){this.config.parent?this.config.parent.resize():this.view&&this.view.resize()}});return a}),define("smithy/GadgetAreaWindow",["./declare","./GadgetArea"],function(e,t){var n=e([t],{constructor:function(e){var t=this.config.windowRef={window:e&&e.window};t.window&&(t.window.smithyProxy={viewFactory:this.config.viewFactory,gadgetFactory:this.config.gadgetFactory}),this.pendingCalls=[],this.isWindow=!0},whenWindowCreated:function(e){var t=this,n=this.config.windowRef,r=this.config.extendedWindowConfig||{},i=r.options,s=r.url||"";i+=", "+(r.configMap&&r.configMap[this.getAddress()]),n.window?n.window.smithyProxy?e():this.pendingCalls.push(e):(n.window=this.createWindow(s,i),this.pendingCalls.push(e),n.window.smithyCallback=function(e,r){var i=window.lastwin;e==="loaded"?i&&i.window===r?(n.window=r,t.unstashLayout(window.lastwin.layout,!0),t.render()):(t.pendingCalls.forEach(function(e){e()}),t.pendingCalls=[]):e==="unloaded"&&n.window===r&&(window.lastwin={window:r,callback:n.window.smithyCallback,layout:t.stashLayout()},t.clearSubAreas(),t.config.windowRef.window=undefined,t.view&&(t.view.destroy(),delete t.view,t.rendered=t.renderedOnce=!1))})},render:function(){var e=this,t=arguments;this.whenWindowCreated(function(){e.inherited(t),e.view.startup(),e.config.windowRef.window.onresize=function(t){e.view.resize()},e.rendered=!0})},createWindow:function(e,t){var n=window.lastwin&&window.lastwin.window;if(!n||n.name!==this.getAddress())n=window.open(e,this.getAddress(),t);return n},resize:function(){this.view&&this.view.resize()}});return n}),define("smithy/GadgetSpace",["./declare","./util","./GadgetFactory","./lifecycle/Registry","./GadgetArea","./BasePlate","./GadgetAreaWindow"],function(e,t,n,r,i,s,o){var u=new t,a=e([s,i],{constructor:function(e){var t,i=this;this.config=u.mixin({gadgetFactory:new n,gadgetSpace:this},e),this.registry=new r,Object.defineProperty(this,"gadgetRegistry",{get:function(){return this.registry.getDescriptorArray(this.registry.locGadgets)},set:function(e){},enumerable:!0}),this.layoutData=this,this.createMainWindow()},statusChange:function(e){this.pub.GadgetSpaceStatusChange({status:e})},createSubArea:function(e){return new o(e)},createMainWindow:function(){this.config.layoutMode=undefined;var e=new o(u.mixin({window:window,parent:this},this.config));this.subAreas=[e]},addGadget:function(e,t,n){var r=u.mixin({name:e,gadget:e,factory:n||this.config.gadgetFactory},t);this.registry.addToRegistry(this.registry.locGadgets,e,r),this.pub.GadgetRegistrationEvent({gadget:e,descriptor:r,event:"GADGETADDED"})},removeGadget:function(e,t){this.registry.removeFromRegistry(e,this.registry.locGadgets),this.pub.GadgetRegistrationEvent({gadget:e,event:"GADGETREMOVED"})},removeSubAreaAtIndex:function(e,t){this.inherited(arguments),t===0&&this.createMainWindow()},loadGadgetTo:function(e,t,n,r){var i=this.registry.getRegistryItem(this.registry.locGadgets,e),s=this.addArea(t,n);return s.loadGadget(i,this,r),s},moveArea:function(e,t,n){throw new Error("Not Implemented")},doesAreaExist:function(e){throw new Error("Not Implemented")},detachArea:function(e){throw new Error("Not Implemented")},enumerateGadgetDescriptors:function(e,t){this.registry.enumerateEntries(this.registry.locGadgets,function(n,r,i){e.call(t,n)})},realizeLayout:function(e){var t=e.gadgetRegistry||[];this.registry.clear(this.registry.locGadgets),t.forEach(function(e,t,n){this.addGadget(n[t].name,n[t])},this),arguments[0]=e.layoutData,this.inherited(arguments)},getSerializedLayout:function(e){var t=this.asModel("GadgetSpaceSchema");return e?t:JSON.stringify(t)},render:function(){var e=this,t=0;this.subAreas.forEach(function(n,r){n.whenWindowCreated(function(){t+=1,n.render(),t===e.subAreas.length&&e.statusChange("RENDERED")})})},resize:function(){this.subAreas.forEach(function(e,t){e.resize()})}});return a}),define("smithy/HashRouter",{register:function(){},startup:function(){},go:function(){}}),define("smithy/PageRouter",["./declare","./util","./HashRouter"],function(e,t,n){var r={},i=new t,s=e(null,{constructor:function(e){var t=this,i=e&&e.rootPattern,s=e&&e.noMatch,o=window.location;e.mode==="hash"?(this.router=n,this.register=function(){n.register.apply(n,arguments)},this.startup=function(){n.startup.apply(n,arguments)},this.go=function(){n.go.apply(n,arguments)},this.isDefault=function(){return!window.location.hash}):e.mode==="url"&&(this.register=function(e,t){r[e.toString()]={fn:t,rgx:e}},this.startup=function(){window.onload=function(){var e=o.pathname.replace(i,""),t;Object.keys(r).some(function(n,i,s){var u=r[n],a=u.rgx.exec(e);return a&&a!==null&&(t=!0,u.fn({pathname:a[0],search:o.search})),t}),!t&&s&&s({pathname:e,search:o.search})}},this.go=function(e,t,n){var r=o.pathname,s=[];this.isDefault()?o.pathname.charAt(o.pathname.length-1)==="/"?r=o.pathname+e:r=o.pathname+"/"+e:(r=r.match(i)[0],r+=e);if(t&&Object.keys(t).length){var u;Object.keys(t).forEach(function(e,n,r){u=u||"?",u!=="?"&&(u+="&"),u=u+e+"="+encodeURIComponent(t[e])}),r+=u}if(n&&Object.keys(n).length){for(var a in n){var f=n[a],l=encodeURIComponent(a)+"=";if(f instanceof Array)for(var c=0,h=f.length;c<h;++c)s.push(l+encodeURIComponent(f[c]));else s.push(l+encodeURIComponent(f))}r=r+"#"+s.join("&")}o.assign(r)},this.isDefault=function(){return!o.pathname.replace(i,"")})}});return s}),define("smithy/PageRoutingGadgetSpace",["./declare","./util","./GadgetSpace","./PageRouter"],function(e,t,n,r){var i=new t,s=e([n],{constructor:function(e){var t=this,n=e&&e.routingSpecification;this.lastRouteParams={},this.config.usePageRouting&&(this.router=new r({mode:this.config.usePageRouting,rootPattern:n&&n.rootPattern||/.*/,noMatch:function(e){var r=n&&n.routes.error;r&&(t.lastRouteParams=t.processRouteParams(e,r),t.processStoredLayout(e,r))}}),n?Object.keys(n.routes).forEach(function(e,r,i){var s=n.routes[e],o;e!=="error"&&(o=s.url.replace(/\{.*\}/,"([^/]*)")||"$",o.charAt(o.length-1)!=="$"&&(o+="$"),t.router.register(new RegExp(o),function(e){t.lastRouteParams=t.processRouteParams(e,s),t.processStoredLayout(e,s)}))}):this.router.register(/[0-9a-f][0-9a-f]+$/,function(e){t.processStoredLayout(e)}),this.router.startup())},getStoredLayout:function(e,t){var n=this.getSlagData(e);return n||require({async:t?!0:!1},[e],function(e){n=e,t&&t(e)}),n},processStoredLayout:function(e,t){var n=t&&t.id||e.pathname,r=this.getStoredLayout(n);typeof r=="string"?this.realizeLayout(JSON.parse(r),!0):this.realizeLayout(r,!0)},processRouteParams:function(e,t){var n,r=e.search&&e.search.substring(1).split("&")||[],i=t.url&&t.url.match(/{(.*?)}/g)||[],s=e.pathname.match(t.url&&t.url.replace(/{.*?}/g,"(.*)")||[]).splice(1);return i.forEach(function(e,t,r){n=n||{},n[e.replace(/[{}]/g,"")]=decodeURIComponent(s[t])}),r.forEach(function(e,t,r){var i=e.split("=");n=n||{},n[i[0]]=decodeURIComponent(i[1])}),n},routeTo:function(e,t,n){var r,s,o=this.config.routingSpecification,u,a=i.mixin({},t);this.router&&o&&o.routes[e]&&(s=o.routes[e],r=s.url,u=s.url.match(/{(.*?)}/g)||[],u.forEach(function(e,t,n){var i=a&&a[e.replace(/[{}]/g,"")];i&&(r=r.replace(e,encodeURIComponent(i)),delete a[e.replace(/[{}]/g,"")])}),this.router.go(r,a,n||{}))},routePage:function(){this.router&&this.router.go(this.stashLayout())},realizeLayout:function(e,t){(this.router&&this.router.isDefault()&&e||t)&&this.inherited(arguments)}});return s}),define("smithy/SmithyProxy",["./declare","./util"],function(e,t){var n=new t,r=e(null,{constructor:function(e){var t=this;if(n.isUndefined(e.gadgetFactory))throw new Error("Must supply a gadgetFactory to a SmithyProxy");if(n.isUndefined(e.viewFactory))throw new Error("Must supply a viewFactory to a SmithyProxy");if(n.isUndefined(window.smithyCallback)){if(!window.opener.lastwin||window.opener.lastwin.window!==window)throw new Error("No smithyCallback defined for this window");console.log("using old callback"),window.smithyCallback=window.opener.lastwin.callback}if(!n.isUndefined(window.smithyProxy))throw new Error("There is a smithy proxy already defined for this window.");this.gadgetFactory=e.gadgetFactory,this.viewFactory=e.viewFactory,window&&!window.smithyProxy&&(window.smithyProxy=this),window.smithyCallback("loaded",window),window.onbeforeunload=function(){window.smithyCallback("unloaded",window)}}});return r}),define("smithy/dojoviews/DojoBorderView",["../declare","dijit/layout/BorderContainer"],function(e,t){var n=e(t,{constructor:function(e){this.implementsMode="borders"},addChild:function(e,t){e.region=t,this.inherited(arguments)},removeChild:function(e){this.inherited(arguments)},hasChild:function(e){var t=this.getIndexOfChild(e);return t>-1},startup:function(){this.inherited(arguments)}});return n}),define("smithy/dojoviews/DojoTabView",["../declare","dijit/layout/TabContainer"],function(e,t){var n=e(t,{constructor:function(e){this.implementsMode="tabs"},addChild:function(e){this.inherited(arguments)},removeChild:function(e){this.inherited(arguments)},hasChild:function(e){var t=this.getIndexOfChild(e);return t>-1},startup:function(){this.inherited(arguments)}});return n}),define("smithy/dojoviews/LayoutContainer",["dojo/_base/declare","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","dojo/_base/lang","dojo/_base/array","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/_base/window","dijit/registry"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e("LayoutContainer",[t,n],{templateString:'<div class="${domNodeClass}" tabIndex="0"></div>',areaWidths:[100],columnsMode:!0,keepOne:!0,fitLayout:!0,minAreaWidth:50,isResizable:!0,isCollapsible:!1,liveResize:!1,gadgetMargin:10,tightSpacing:!1,gripWidth:6,showSplitter:!0,postMixInProperties:function(){this.inherited(arguments);var e=this.columnsMode,t=e?"H":"V",n="width",r="height",i="offsetWidth",s="offsetHeight";this._resizeDim=e?n:r,this._flowDim=e?r:n,this._widthProp=e?i:s,this._heightProp=e?s:i,this.domNodeClass="layoutContainer"+t,this.areaClass="layoutContainerArea"+t,this._firstLayout=!0,this._areaCounter=0},postCreate:function(){this.inherited(arguments);var e=this.areaWidths,t=[];r.isString(e)&&(i.forEach(e.split(","),function(e){t.push(parseInt(e,10))}),this.areaWidths=t),this._areas=[],this._createAreas()},startup:function(){var e,t=this.domNode,n=this.columnsMode,r=this.getParent(),i;if(this._started||!this.domNode.parentNode)return;this.fitLayout?this._border={h:0,w:0}:(s.set(t,"overflow"+n?"Y":"X","hidden"),s.set(t,this._flowDim,"auto")),i=this._nested=r instanceof h,this._nestedTight=i&&r.tightSpacing,this._setAllChildStyles(),this.inherited(arguments);for(e=0;e<this.nbAreas-1;e+=1)this._createSplitter(e);this.onStartup(this)},_getDim:function(e){var t=this.columnsMode;return e&&(t=!t),t?"w":"h"},render:function(){this._layoutTime()},_createAreas:function(){var e,t=this.nbAreas,n=this.areaWidths||[],r=[],i,s=0,o,u;t||(this.nbAreas=t=this.keepOne?1:0);for(e=0;e<t;e+=1)r.length<n.length?i=n[e]:(o||(o=(100-s)/(t-e)),i=o,r.push(i)),s+=i,r.push(i);for(e=0;e<t;e+=1)u=this._createAreaNode(r[e]),this._areas.push({node:this.containerNode.appendChild(u),index:e}),this.onAddArea(this,u)},_createAreaNode:function(e){var t,n={display:this.columnsMode?"inline-block":"block"};return e&&(n[this._resizeDim]=e+"%"),t=a.create("div",{className:this.areaClass,id:this.id+"_dz"+this._areaCounter,style:n}),this._areaCounter+=1,t},addArea:function(e){var t,n,r,i,s,o,u,a,l,c,h,p,d=this._getDim(),v=this._areas,m=this.nbAreas;t=e===0,t||e===m?(s=t?0:m-1,o=v[s].node,i=f.getContentBox(o)[d]/2,u=[i],l=[t?1:s],p=t?0:s):(o=v[e-1].node,i=f.getContentBox(o)[d]/3,u=[i*2],o=v[e].node,r=f.getContentBox(o)[d]/3,i+=r,u.push(2*r),l=[e-1,e+1],p=e),this._started&&this._setAllChildStyles(),h=this._createArea(e),this._createSplitter(p);for(n=0;n<l.length;n+=1)c=l[n],a=u[n],this._resizeAreaWidth(c,a);this._resizeAreaWidth(e,i),this._placeGrips(),this.onAddArea(this,h)},_createArea:function(e){var t,n=this._areas,r=this.containerNode,i=this._createAreaNode(0),s={node:i,index:e};e===n.length?(r.appendChild(i),n.push(s)):(r.insertBefore(i,n[e].node),n.splice(e,0,s));for(t=e;t<n.length;t+=1)n[t].index=t;return this.nbAreas+=1,i},addMissingAreas:function(e){var t=this.nbAreas,n=e-t+1;n>0&&(t===0?(this.nbAreas=n,this._createAreas()):n===1?this.addArea(e):this.addAreas(n))},addAreas:function(e){var t=this.nbAreas,n=e+t,r=this._getAreaWidths(),i=this._total(r),s=1/n*i,o=t/n,u,a;for(u=0;u<t;u+=1)this._resizeAreaWidth(u,r[u]*o);for(u=0;u<e;u+=1)this._createArea(this.nbAreas),a=t+u-1,a>=0&&this._createSplitter(a),this._resizeAreaWidth(t+u,s);this._placeGrips()},removeArea:function(e){var t=this._getAreaWidths(),n=t[e],r=this._getTotalAreaWidth(),i,s,o,u,a=this._areas[e];if(this.nbAreas===1&&this.keepOne)return!1;if(!a)throw new Error("Invalid area index");this._deleteArea(e),t.splice(e,1),i=r-n,o=r,u=this.nbAreas;for(s=0;s<u;s+=1)s===u-1?n=o:(n=t[s]*r/i,o-=n),this._resizeAreaWidth(s,n);return this._placeGrips(),!0},_deleteArea:function(e){var t=this._areas,n=t[e],r=n.node,i=r.firstChild,s,o,u;i&&(s=c.byNode(i),this.removeChild(s||i)),n.grip&&this._deleteAreaGrip(n),this.onRemoveArea(this,r),a.destroy(this.containerNode.removeChild(r)),t.splice(e,1),this.nbAreas-=1;for(u=e;u<t.length;u+=1)t[u].index=u;o=t[this.nbAreas-1],o.grip&&this._deleteAreaGrip(o)},addChild:function(e,t,n){var r=e.domNode,i=!!r,s=r||e,o=s.parentNode,a=o&&o.parentNode,f=a===this.containerNode,l,c=this._areas;f&&this.removeChild(e);if(typeof t!="number"){for(var p=0;p<c.length;p+=1)if(!c[p].node.firstChild){t=p;break}typeof t!="number"&&(t=c.length)}this.addMissingAreas(t),l=c[t].node,l.firstChild&&(this.addArea(t),l=c[t].node),i&&h.superclass.addChild.call(this,e),l.appendChild(s),u.set(s,"tabIndex","0"),this._started&&this._setChildStyle(s,l,t),this.onAddChild(this,l,e),n!==!1&&this._started&&this._resizeChild(l,s),this.onAreaChildChange(this,l,e)},removeChild:function(e,t){var n=e.domNode,r=n||e,i=!!n,s=r.parentNode;i?this.inherited(arguments):s.removeChild(r),typeof t=="number"&&this.removeArea(t),this.onRemoveChild(this,s,e)},removeChildAt:function(e){var t=this._areas[e].node.firstChild,n=t&&c.byNode(t);t&&this.removeChild(n||t)},_setChildStyle:function(e,t,n,r){r=r||c.byNode(e);if(r&&r instanceof h){t.style.position="";return}var i=this.columnsMode,s=this.gadgetMargin,o=s/2,u=e.style,a=this.tightSpacing,f=this._nested,l=a?o:s,p=this._nestedTight?o:s,d=f&&n===0?s:l,v=f&&n===this.nbAreas-1?s:l,m="px";t.style.position="relative",u.position="absolute",u[i?"left":"top"]=d+m,u[i?"right":"bottom"]=v+m,u[i?"top":"left"]=u[i?"bottom":"right"]=this.fitLayout?p+m:""},_setAllChildStyles:function(){i.forEach(this._areas,function(e,t){var n=e.node,r=n.firstChild;this._setChildStyle(r,n,t)},this)},_createSplitter:function(e){var t=this._areas[e],n,i,s;if(!this.isResizable)return;i=this._createGrip(),n=i.splitter,s=i.gripHover,t.grip=i,i.area=t,t.gripHandler=[this.connect(s,"onmouseover",function(e){this._handleGripMouseOver(e,i)}),this.connect(s,"onmouseout",function(e){this._handleGripMouseOut(e,i)}),this.connect(n,"onmousedown",function(e){this._handleResizeAreaOn(e,i)})],this.isCollapsible&&(i.left.onclick=r.hitch(this,function(){this.collapseArea(i,"left")}),i.right.onclick=r.hitch(this,function(){this.collapseArea(i,"right")}))},_deleteAreaGrip:function(e){var t;i.forEach(e.gripHandler,this.disconnect,this),a.destroy(this.domNode.removeChild(e.grip.splitter)),delete e.gripHandler,delete e.grip},_createGrip:function(){var e=this.columnsMode,t=e?"V":"H",n={},r,i=this._resizeDim,s=this.gripWidth,o=this.gadgetMargin,u,f,l,c,h,p;return n[i]=2*o-4+"px",u=a.create("div",{className:"layoutContainerGripSplitter"+t,style:n},this.domNode),f=a.create("div",{style:"width:100%;height:100%"},u),n[i]=s-2+"px",n["margin"+(e?"Left":"Top")]=-s/2+"px",r="layoutContainerGrip"+t,this.showSplitter&&(r+=" layoutContainerGripShowNormal"+t),a.create("div",{className:r,style:n},f),this.isCollapsible&&(l=a.create("div",{className:"layoutContainerGripHandle"+t},u),p="Collapse "+e?"column to the left":"up",c=a.create("div",{title:p,className:"layoutContainerGripLeft"+t},l),p="Collapse "+e?"column to the right":"down",h=a.create("div",{title:p,className:"layoutContainerGripRight"+t},l)),{splitter:u,gripHover:f,handle:l,left:c,right:h}},_showActiveSplitter:function(e){o.toggle(this._activeGrip.splitter,"layoutContainerActiveSplitter",e)},_handleGripMouseOver:function(e,t){o.add(t.splitter,"layoutContainerGripSplitterHover")},_handleGripMouseOut:function(e,t){o.remove(t.splitter,"layoutContainerGripSplitterHover")},_handleGripMouseUp:function(){l.body().style.cursor="default",this.disconnect(this._connectResizeMove),this.disconnect(this._connectGripMouseUp),this._connectGripMouseUp=this._connectResizeMove=null,this._clearCover()},_clearCover:function(e){this._cover&&a.destroy(this._cover),e?this._cover=a.create("div",{style:"top: 0px; left: 0px; position: absolute; z-index: 1000; height: 100%; width: 100%;"},this._activeGrip.splitter,"before"):this._cover=0},calculateChildMinWidth:function(e){var t=0,n=0,r,o,u=this.columnsMode;return i.forEach(e,function(e){e.nodeType===1&&(r=s.getComputedStyle(e),o=parseInt(r[u?"minWidth":"minHeight"],10),n=o+parseInt(r[u?"marginLeft":"marginTop"],10)+parseInt(r[u?"marginRight":"marginBottom"],10),t<n&&(t=n))}),t},_handleResizeAreaOn:function(e,t){var n,r=this._areas,i=r.length,s,o,u,a,f,c=this.columnsMode;this._activeGrip=t,this._showActiveSplitter(!0),this._initMouseLocation=e["page"+(c?"X":"Y")],e.preventDefault(),l.body().style.cursor=c?"col-resize":"row-resize",n=this._getAreaWidths();for(o=0;o<i;o+=1){s=r[o];if(t===s.grip){u=this._currentArea=s.node,this._currentAreaIndex=o,this._currentAreaWidth=n[o],a=this._nextArea=r[o+1].node,this._nextAreaWidth=n[o+1];break}}f=this.minAreaWidth,this._currentMinWidth=Math.max(this.calculateChildMinWidth(u.childNodes),f),this._nextMinWidth=Math.max(this.calculateChildMinWidth(a.childNodes),f),this._connectResizeMove=this.connect(l.doc,"onmousemove","_handleResizeAreaMove"),this._connectGripMouseUp=this.connect(l.doc,"onmouseup","_handleGripMouseUp"),this._clearCover(!0)},_handleResizeAreaMove:function(e){e.preventDefault(),this._connectResizeOff||(this.disconnect(this._connectGripMouseUp),this._connectGripMouseUp=null,this._connectResizeOff=this.connect(l.doc,"onmouseup","_handleResizeAreaOff"));var t=this.columnsMode,n=e["page"+(t?"X":"Y")],r=this._initMouseLocation,i=n-r,s,o;if(i===0)return;this._currentAreaWidth+i<this._currentMinWidth||this._nextAreaWidth-i<this._nextMinWidth?(this._currentAreaWidth+i<this._currentMinWidth?i=this._currentMinWidth-this._currentAreaWidth:i=this._nextAreaWidth-this._nextMinWidth,r+=i):r=n,this._initMouseLocation=r,i!==0&&(this._currentAreaWidth+=i,this._nextAreaWidth-=i,s=t?"left":"top",o=this._activeGrip.splitter.style,o[s]=parseInt(o[s],10)+i+"px",this.liveResize&&(s=this._resizeDim,this._currentArea.style[s]=this._currentAreaWidth+"px",this._nextArea.style[s]=this._nextAreaWidth+"px",this.resize()))},_handleResizeAreaOff:function(e){var t;l.body().style.cursor="default",this._clearCover(),this.disconnect(this._connectResizeMove),this.disconnect(this._connectResizeOff),this._connectResizeOff=this._connectResizeMove=null,this._showActiveSplitter(!1),this.liveResize||(t=this._currentAreaIndex,this._resizeAreaWidth(t,this._currentAreaWidth),this._resizeAreaWidth(t+1,this._nextAreaWidth)),this._placeGrips()},collapseArea:function(e,t){var n=this._areas,r=this.minAreaWidth,i=e.area,s=i.node,o,u,a,f,l;o=e.area.index,e.restoreWidth=s[this._widthProp],t==="left"?(a=this.getNextExpandedArea(o),u=isNaN(a)?o+1:a):(a=this.getPreviousExpandedArea(o),u=isNaN(a)?o:a,o+=1),f=r,l=this._getAreaWidth(u)+this._getAreaWidth(o)-r,this._resizeAreaWidth(o,f),this._resizeAreaWidth(u,l),n[o].collapseDirection=t,this._placeGrips()},isAreaCollapsed:function(e){return this._areas[e].node[this._widthProp]<=this.minAreaWidth},getNextExpandedArea:function(e){var t;for(t=e+1;t<this.nbAreas;t+=1)if(!this.isAreaCollapsed(t))return t},getPreviousExpandedArea:function(e){var t;for(t=e;t>=0;t-=1)if(!this.isAreaCollapsed(t))return t},restoreArea:function(e){var t,n=this._areas,r=n[e],i=this._getAreaWidth(e),s=r.restoreWidth,o=r.collapseDirection,u=this.getNextExpandedArea(e),a=this.getPreviousExpandedArea(e),f,l,c;s&&(o==="left"?t=isNaN(u)?a:u:t=isNaN(a)?u:a,f=this._getAreaWidth(t),s>f?(l=f/2+i,c=f/2):(l=s,c=f-s+i),this._resizeAreaWidth(e,l),this._resizeAreaWidth(t,c),this._placeGrips())},setCollapsed:function(e,t){var n=this._areas,i=n[e],s,o,u=this.columnsMode;if(!this.isCollapsible)return;i.collapsed!==t&&(i.collapsed=t,s=n[e-1],o=i.grip,t?(i.restoreWidth=i.node[this._widthProp],o&&(o.left.style.display="none",o.right.title="Restore"+(u?" column":""),o.right.onclick=r.hitch(this,function(){i.collapseDirection="left",this.restoreArea(i.index)})),s&&s.grip&&(o=s.grip,o.right.style.display="none",o.left.title="Restore"+(u?" column":""),o.left.onclick=r.hitch(this,function(){i.collapseDirection="right",this.restoreArea(i.index)}))):(delete i.restoreWidth,o&&(o.left.style.display="",o.right.title="Collapse "+(u?"column to the right":"down"),o.right.onclick=r.hitch(this,function(){this.collapseArea(i.grip,"right")})),s&&s.grip&&(o=s.grip,o.right.style.display="",o.left.title="Collapse "+(u?"column to the left":"up"),o.left.onclick=r.hitch(this,function(){this.collapseArea(s.grip,"left")}))))},_resizeChild:function(e,t){var n;if(!this._started)return;t&&(n=c.byNode(t),n&&n.resize&&n.resize(),this.onResizeChild(this,e,n||t))},_resizeAreaWidth:function(e,t){if(!this._started)return;var n=t<=this.minAreaWidth,r=this._areas[e].node,i=r.firstChild;this.setCollapsed(e,n),r.style[this._resizeDim]=t+"px",this._resizeChild(r,i),this.onResizeArea(this,r)},layout:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);if(this._firstLayout){if(f.getContentBox(this.domNode)[this._getDim()]===0)return;this._firstLayout=!1,this._setInitialAreaWidths(),this._layoutTime()}else this._timer=setTimeout(r.hitch(this,this._layoutTime),100)},_layoutTime:function(){var e,t,n,r,i,s,o,u=this._getDim(),a=this._getDim(1);this._timer=null;if(!this.domNode)return;r=this._getTotalAreaWidth(),e=this.getContentBox(),o=i=e[u]-this._border[u],n=this.nbAreas;for(t=0;t<n;t+=1)t+1===n?s=o:(s=this._getAreaWidth(t)*i/r,o-=s),this._resizeAreaWidth(t,s);this._placeGrips()},_placeGrips:function(){var e,t=this._heightProp,n=this._widthProp,r=this._getDim(),o=this.containerNode[t],u=0,a=this.columnsMode,l,c,h;i.forEach(this._areas,function(i){l=i.grip,l&&(c=l.splitter,e||(e=c[n]/2),u+=f.getMarginBox(i.node)[r],s.set(c,a?"left":"top",u-e+"px"),h=l.handle,h&&s.set(h,a?"top":"left",o/2-h[t]/2+"px"))},this)},_setInitialAreaWidths:function(){var e,t,n=this._areas,r=this._getDim(),i={};if(this._setInitialWidths||!f.getContentBox(this.domNode)[r])return;this._setInitialWidths=1;for(e=0;e<n.length;e+=1)t=n[e].node,i[r]=f.getContentBox(t)[r],f.setContentSize(t,i)},_getAreaWidth:function(e){return parseInt(this._areas[e].node.style[this._resizeDim],10)},_getAreaWidths:function(){var e=[],t;for(t=0;t<this.nbAreas;t+=1)e[t]=this._getAreaWidth(t);return e},_total:function(e){var t,n=0;for(t=0;t<e.length;t+=1)n+=e[t];return n},_getTotalAreaWidth:function(){return this._total(this._getAreaWidths())},getWidthsAsPercent:function(){var e,t=[],n=this._getAreaWidths(),r=this._total(n);for(e=0;e<n.length;e+=1)t.push(n[e]*100/r);return t},getAreaCount:function(){return this.nbAreas},removeEmptyAreas:function(){var e;for(e=0;e<this.nbAreas;e+=1)if(this.isAreaEmpty(e))return this.removeArea(e),!0;return!1},isAreaEmpty:function(e){var t=this._areas[e].node,n=t.firstChild,r=c.byNode(n);return r&&r.isEmpty?r.isEmpty():!!n},findAreaByAreaNode:function(e){var t,n=this._areas,r;for(t=0;t<n.length;t+=1){r=n[t];if(r.node===e)return r}},getAreasChildren:function(){var e=[];return i.forEach(this._areas,function(t){var n=t.node,r=n&&c.byNode(n);n&&e.push(r||n)}),e},destroy:function(){this.onDestroy(this),this.inherited(arguments),this._timer&&(clearTimeout(this._timer),this._timer=0)},getContentBox:function(){if(this._contentBox.w)return this._contentBox;var e=this.domNode,t,n,r,i,o,u;return t=f.getMarginBox(e),n=s.getComputedStyle(e),r=f.getMarginExtents(e,n),i=f.getBorderExtents(e,n),o=this._borderBox={w:t.w-(r.w+i.w),h:t.h-(r.h+i.h)},u=f.getPadExtents(e,n),this._contentBox={l:s.toPixelValue(e,n.paddingLeft),t:s.toPixelValue(e,n.paddingTop),w:o.w-u.w,h:o.h-u.h},this._contentBox},onStartup:function(e){},onDestroy:function(e){},onAddArea:function(e,t){},onRemoveArea:function(e,t){},onAddChild:function(e,t,n){},onRemoveChild:function(e,t,n){},onAreaChildChange:function(e,t,n){},onResizeChild:function(e,t,n){},onResizeArea:function(e,t){}});return h}),define("smithy/dojoviews/DojoArrayView",["../declare","./LayoutContainer"],function(e,t){var n=e(t,{constructor:function(e){var t="columns",n=this.implementsMode=e.mode||t;this.columnsMode=n===t},addChild:function(e,t,n){this.inherited(arguments)},removeChild:function(e){this.inherited(arguments)},hasChild:function(e){var t=this.getChildren(),n=t.indexOf(e);return n>-1},startup:function(){this.inherited(arguments)}});return n}),define("smithy/dojoviews/DojoViewFactory",["../declare","dojo/dom","dojo/_base/window","./DojoBorderView","./DojoTabView","./DojoArrayView","smithy/util"],function(e,t,n,r,i,s,o){var u=new o,a=e(null,{constructor:function(e){this.config=u.mixin({configMap:{},root:"dojoRoot"},e)},createView:function(e,o){var u,a,f,l=n.doc,c=this.config.configMap[e.getAddress()],h=e.isWindow?this.config.root:e.getAddress();e.isWindow&&!t.byId(this.config.root)&&(f=l.createElement("div"),f.setAttribute("id",this.config.root),n.body().appendChild(f));if(o==="borders")u=new r(c||{style:"height:100%; width:100%"},h);else if(o==="tabs")u=new i(c||{style:"height:100%; width:100%"},h);else if(o==="rows"||o==="columns")u=new s(c||{mode:o},h);return u}});return a}),define("smithy/lifecycle/Messaging",["../declare","../util","./Registry","../Logger"],function(e,t,n,r){var i,s=new t,o=new r("debug"),u=e(null,i={constructor:function(e){var t=function(e){var t=this.channelFactory.get("smithy/schema/channels/"+e,this,"framework");this.pub[e]=function(n){o.debug("Sending message ["+e+"] from gadget",n),t.publish(n)},this.registry.addToRegistry(this.registry.locPublishes,t.channelName,t)};e.features.hasMessaging?(this.pub={},this.channelFactory=e&&e.channelFactory,this.registry||(this.registry=new n),t.call(this,"GadgetStatusChange")):Object.keys(i).forEach(function(e,t,n){var r=i[e];typeof r=="function"&&n.hasOwnProperty(e)&&(this[e]=function(){})},this)},setupMessaging:function(){},teardownMessaging:function(){var e=this.registry,t=e.getRegistryLocation(e.locPublishes),n=this.registry.getRegistryLocation(this.registry.locSubscribes);Object.keys(t).forEach(function(n,r,i){var s=t[n];delete this.pub[n],e.removeFromRegistry(e.locPublishes,n)},this),Object.keys(n).forEach(function(t,r,i){var s=n[t];s.unsubscribe(this),e.removeFromRegistry(e.locSubscribes,t)},this)},registerPublisher:function(e){var t=this.channelFactory.get(e,this);this.pub[t.channelName]=function(n){o.debug("Sending message ["+e+"] from gadget",n),t.publish(n)},this.registry.addToRegistry(this.registry.locPublishes,t.channelName,t)},registerSubscriber:function(e,t,n,r){var i=this.channelFactory.get(e,this),s=typeof r=="boolean"?r:!0;i.subscribe(t,n,s),this.registry.addToRegistry(this.registry.locSubscribes,i.channelName,i)},registerFrameworkSubscriber:function(e,t,n,r){var i=this.channelFactory.get("smithy/schema/channels/"+e,this,"framework"),s=typeof r=="boolean"?r:!0;i.subscribe(t,n,s),this.registry.addToRegistry(this.registry.locSubscribes,i.channelName,i)},unregisterSubscriber:function(e){var t=this.registry.getRegistryLocation(this.registry.locSubscribes)[e];s.isDefined(t)&&(t.unsubscribe(),this.registry.removeFromRegistry(this.registry.locSubscribes,t.channelName))}});return u}),define("smithy/lifecycle/Services",["../declare","./Registry","../util"],function(e,t,n){var r,i=new n,s=e(null,r={constructor:function(e){this.registry||(this.registry=new t),this.serviceFactory=e&&e.serviceFactory,e.features.hasServices||Object.keys(r).forEach(function(e,t,n){var i=r[e];typeof i=="function"&&r.hasOwnProperty(e)&&e!=="constructor"&&(this[e]=function(){})},this)},setupServices:function(){},teardownServices:function(){var e=this.registry,t=this.registry.getRegistryLocation(this.registry.locServices);Object.keys(t).forEach(function(t,n,r){e.removeFromRegistry(this.registry.locServices,t)},this)},registerService:function(e,t){var n;return typeof e=="string"?n=this.serviceFactory.getServiceByName(e,t):e&&(n=this.serviceFactory.getService(e,t)),this[n.name]=n,this.registry.addToRegistry(this.registry.locServices,n.name,n),n}});return s}),define("smithy/lifecycle/View",["../declare","./Registry"],function(e,t){var n=e(null,{constructor:function(){this.registry||(this.registry=new t)},setupView:function(){this.statusChange&&this.statusChange("VIEW-UP")},teardownView:function(){}});return n}),define("smithy/lifecycle/LifeCycle",["../declare","./Registry","./Messaging","./Services","./View"],function(e,t,n,r,i){var s=e([n,r,i],{constructor:function(e){e.features.hasMessaging||(this.statusChange=function(){})},statusChange:function(e){this.pub.GadgetStatusChange({name:this.name,address:this.parent.getAddress(),status:e})},setupLifecycle:function(){this.setupMessaging(),this.statusChange("MESSAGING-UP"),this.setupServices(),this.statusChange("SERVICES-UP")},teardownLifecycle:function(){this.statusChange("DESTROYING"),this.teardownView(),this.statusChange("VIEW-DN"),this.teardownServices(),this.statusChange("SERVICES-DN"),this.teardownMessaging()}});return s}),define("smithy/schema/channels/AreaStatusChange",[],function(){return{schemaId:"smithy/schema/channels/AreaStatusChange",description:"Indicates a gadget status change.",properties:{address:{type:"string",description:"address of area.",required:!0},status:{type:"string",description:"Current status of the area.","enum":["CREATED","RENDERED","DESTROYED"],required:!0}}}}),define("smithy/schema/channels/GadgetRegistrationEvent",[],function(){return{schemaId:"smithy/schema/channels/GadgetRegistrationEvent",description:"Indicates an event in the registration of gadgets in a gadget space.",properties:{gadget:{type:"string",description:"The name of the subject gadget.",require:!0},descriptor:{type:"object",description:"The descriptor provided during gadget registration.",required:!1},event:{type:"string",description:"The registration event that occurred.","enum":["GADGETADDED","GADGETREMOVED"],required:!0}}}}),define("smithy/schema/channels/GadgetSpaceStatusChange",[],function(){return{schemaId:"smithy/schema/channels/GadgetSpaceStatusChange",description:"Indicates a gadget space status change.",properties:{status:{type:"string",description:"Current status of the gadget space.","enum":["CREATED","RENDERED","DESTROYED"],required:!0}}}}),define("smithy/schema/channels/GadgetStatusChange",[],function(){return{schemaId:"smithy/schema/channels/GadgetStatusChange",description:"Indicates a gadget status change.",properties:{name:{type:"string",description:"Name of gadget",required:!0},address:{type:"string",description:"The address of the gadget's area.",required:!0},status:{type:"string",description:"Current status of the gadget.","enum":["CREATED","MESSAGING-UP","SERVICES-UP","VIEW-UP","SERVICES-DN","VIEW-DN","DESTROYING"],required:!0}}}}),define("smithy/schema/channels/SlagChange",[],function(){return{schemaId:"smithy/schema/channels/SlagChange",description:"Indicates a value in the slag has changed.",properties:{path:{type:"string",description:"the path or name of the slag data",required:!0},oldValue:{type:"object",description:"The old value of the slag data."},newValue:{type:"object",description:"The new value of the slag data."}}}}),define("smithy/schema/models/GadgetAreaSchema",[],function(){return{id:"smithy/schema/GadgetAreaSchema",tag:{resolved:!1},description:"The significant properties on a GadgetArea",$schema:"http://json-schema.org/draft-03/schema",type:"object",properties:{address:{type:"string",description:"the address in the gadget space for this area",required:!0},layoutMode:{type:"string",description:"the type of layout for this area, understood by the layoutFunction for the area",required:!0},gadget:{type:"object",description:"The model schema describing the gadget.",$ref:"smithy/schema/models/GadgetSchema"},subAreas:{type:"array",description:"List of areas under this node.",required:!1,items:{$ref:"smithy/schema/models/GadgetAreaSchema"}}}}}),define("smithy/schema/models/GadgetDescriptorSchema",{id:"smithy/schema/GadgetDescriptorSchema",description:"The significant properties on a gadget registry entry",$schema:"http://json-schema.org/draft-03/schema",type:"object",properties:{name:{type:"string",description:"the name the gadget is registered under.",required:!0},gadget:{type:"string",description:"the name of the gadget class to load.",required:!0},data:{type:"any",description:"Static data to pass to the gadget when loading."}}}),define("smithy/schema/models/GadgetSchema",[],function(){return{id:"smithy/schema/models/GadgetSchema",tag:{resolved:!1},description:"The significant properties of a Gadget",$schema:"http://json-schema.org/draft-03/schema",type:"object",properties:{name:{type:"string",description:"A class name resolvable by a GadgetFactory.",required:!0},stateData:{type:"any",description:"State data that has meaning to gadget."}}}}),define("smithy/schema/models/GadgetSpaceSchema",{id:"smithy/schema/GadgetSpaceSchema",description:"The significant properties on a GadgetSpace",$schema:"http://json-schema.org/draft-03/schema",type:"object",properties:{gadgetRegistry:{type:"array",items:{$ref:"smithy/schema/models/GadgetDescriptorSchema"}},layoutData:{$ref:"smithy/schema/models/GadgetAreaSchema"}}}),define("smithy/Gadget",["./declare","./Logger","./lifecycle/LifeCycle"],function(e,t,n){var r=new t("debug"),i=e([n],{constructor:function(e){this.config=e,this.stateData={}},getView:function(){return this},destroy:function(){this.inherited(arguments),this.teardownLifecycle()}});return i}),define("smithy/ToolGadget",["./declare","./Gadget"],function(e,t){var n=e([t],{constructor:function(e){this.gadgetSpace=e.gadgetSpace}});return n}),define("smithy/fullpack",["./GadgetSpace","./PageRoutingGadgetSpace","./SmithyProxy","./dojoviews/DojoViewFactory","./lifecycle/LifeCycle","./GadgetSpace","./schema/channels/AreaStatusChange","./schema/channels/GadgetRegistrationEvent","./schema/channels/GadgetSpaceStatusChange","./schema/channels/GadgetStatusChange","./schema/channels/SlagChange","./schema/models/GadgetAreaSchema","./schema/models/GadgetDescriptorSchema","./schema/models/GadgetSchema","./schema/models/GadgetSpaceSchema","./ToolGadget"],function(){});